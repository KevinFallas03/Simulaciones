/*********************************************************
Evaluacion 1 - Blackjack
Kevin Fallas Alvarado 2019057752
Esteban Madrigal Marin 2018154123

La probabilidad del jugador obtenida es de: 
**********************************************************/
CLEAROUTPUT
/*Funcion para sumar las cartas*/
NEWCMD CONTAR_CARTAS cartas suma       
       COPY cartas copiaCartas
       RECODE copiaCartas > 10 10 copiaCartas
       SUM copiaCartas sumaTotal
       IF (1 memberof copiaCartas) and (sumaTotal + 10)<=21
          suma = sumaTotal + 10
       ELSE
          suma = sumaTotal
       END
END

/*Estrategia del jugador para pedir cartas*/
NEWCMD PEDIR_CARTA_JUGADOR cartasJugador cartaVisibleCasa seguirPidiendo
	CONTAR_CARTAS cartasJugador sumaTotal
	IF sumaTotal between 4 11
		seguirPidiendo = 1 'Hit
	ELSEIF sumaTotal = 12 AND cartaVisibleCasa notbetween 4 6
		seguirPidiento = 1 'Hit
	ELSEIF sumaTotal between 13 16 AND cartaVisibleCasa notbetween 2 6
		seguirPidiendo = 1 'Hit
	ELSE
		seguirPidiendo = 0 'Stand
	END
END
/*Estrategia de la casa para pedir cartas*/


/*** Desarrollo de la simulacion ***/
/*Se genera un "deck" de cartas*/

COPY 4#1,13 deck
SHUFFLE deck deck 'Se mezclan las cartas

/*se reparten las cartas del jugador*/
TAKE deck (1 3) cartasJug
/*se reparten las cartas de la casa*/
TAKE deck (2 4) cartasCasa
TAKE cartasCasa (2) cartaVisibleCasa 'para saber solo la carta visible de la casa
/*se eliminan las cartas repartidas*/
REMOVE deck (1 2 3 4) deck

PRINT "Cartas del jugador y cartas de la casa"
PRINT cartasJug cartasCasa

/* estrategia del jugador */
PEDIR_CARTA_JUGADOR cartasJug cartaVisibleCasa siguePidiendo
WHILE siguePidiendo=1
	TAKE deck (1) nuevaCarta
	COPY cartasJug nuevaCarta cartasJug ' Incorpora la nueva carta en el mazo del jugador
	REMOVE deck (1) deck
	PRINT cartasJug
	PEDIR_CARTA_JUGADOR cartasJug cartaVisibleCasa siguePidiendo
END
/* estrategia de la casa*/

/*se determina el ganador*/

/*se almacenan los resultados*/
